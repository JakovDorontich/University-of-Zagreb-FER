<html><head><meta http-equiv=Content-Type content="text/html; charset=iso-8859-2">
<title>Vi¹ezadaæni rad</title>
</head>
<body lang=EN-GB>
<h2><b>Dekkerov postupak meðusobnog iskljuèivanja</b></h2><h3><b>Zadatak</b></h3><p>Ostvariti sustav paralelnih procesa/dretvi. 
Primjer strukture procesa, odnosno dretve dana je sljedeæim pseudokodom:</p>

<pre><u>proces</u> proc(<b>i</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* <b>i</b>&nbsp; [0..<b>n</b>-1] */
{
&nbsp;&nbsp; <u>za</u> <b>k </b>= 1 <u>do</u> 5 <u>èini</u> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>uði u kritièni odsjeèak</b>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>za</u> <b>m</b> = 1 <u>do</u> 5 <u>èini</u> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ispi¹i (<b>i</b>, <b>k</b>, <b>m</b>)
      }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>izaði iz kritiènog odsjeèka
</b>   }
}</pre>
<p>Umjesto navedenog primjera moguæe je ostvariti bilo koji drugi primjer 
meðusobnog iskljuèivanja procesa, odnosno dretvi.</p>
<p>Meðusobno iskljuèivanje ostvariti za dva procesa/dretve meðusobnim iskljuèivanjem po Dekkerovom algoritmu.</p>
<h3><b>Dekkerov algoritam:</b></h3>

<pre><u>zajednièke varijable</u>: PRAVO, ZASTAVICA[0..1]
&nbsp;<o:p></o:p>
<u>funkcija</u> uði_u_kritièni_odsjeèak(i,j)
{
   ZASTAVICA[i] = 1
  &nbsp;<u>dok je</u> ZASTAVICA[j]&lt;&gt;0 <u>èini</u> {
      <u>ako je</u> PRAVO==j <u>onda</u> {
         ZASTAVICA[i] = 0
         <u>dok je</u> PRAVO==j <u>èini</u> {
            <u>ni¹ta</u>
         }
         ZASTAVICA[i] = 1
      }
   }
}
&nbsp;
<u>funkcija</u> izaði_iz_kritiènog_odsjeèka(i,j)
{
   PRAVO = j
   ZASTAVICA[i] = 0
}</pre>
<h3><b>Upute:</b></h3>
<p><font color="#FF0000">Ako se program rje¹ava s procesima tada treba zajednièke varijable tako organizirati da se prostor za njih zauzme odjednom i podijeli meðu njima. Ovo je nu¾no zbog ogranièenog broja segmenata i velikog broja korisnika.</font></p><p>Ovisno o optereæenju raèunala i broju procesa koji se pokreæu, a da bi se vidjele razlike prilikom izvoðenja programa mo¾e biti potrebno usporiti izvr¹avanje sa:</p>

<pre>sleep(1);</pre><p>nakon: <tt><span style='font-size:10.0pt;font-family:
"Courier New"'>ispisi (<b>i</b>, <b>k</b>, <b>m</b>)</span></tt>.</p>
<h3>Primjer ispisa:</h3>
<pre>pinus:~/vj3&gt; ./a.out
Dretva: 1, K.O. br: 1 (1/5)
Dretva: 1, K.O. br: 1 (2/5)
Dretva: 1, K.O. br: 1 (3/5)
Dretva: 1, K.O. br: 1 (4/5)
Dretva: 1, K.O. br: 1 (5/5)
Dretva: 2, K.O. br: 1 (1/5)
Dretva: 2, K.O. br: 1 (2/5)
Dretva: 2, K.O. br: 1 (3/5)
Dretva: 2, K.O. br: 1 (4/5)
Dretva: 2, K.O. br: 1 (5/5)
Dretva: 1, K.O. br: 2 (1/5)
Dretva: 1, K.O. br: 2 (2/5)
Dretva: 1, K.O. br: 2 (3/5)
Dretva: 1, K.O. br: 2 (4/5)
Dretva: 1, K.O. br: 2 (5/5)
Dretva: 2, K.O. br: 2 (1/5)
Dretva: 2, K.O. br: 1 (2/5)
itd.</pre>

</body></html>